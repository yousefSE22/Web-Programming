(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();class f{constructor(t,n){this.callback=t,this.duration=n,this.intervalId=null}start(){let t=this.duration/1e3;this.intervalId=setInterval(()=>{this.callback(Math.floor(t)),t<=0&&this.stop(),t-=.1},100)}stop(){clearInterval(this.intervalId)}}document.addEventListener("DOMContentLoaded",function(){document.getElementById("startGameButton").addEventListener("click",l),document.getElementById("submitAnswerButton").addEventListener("click",y),document.getElementById("restartGameButton").addEventListener("click",w),document.getElementById("highScoreLink").addEventListener("click",B),document.getElementById("nickname").addEventListener("keypress",function(e){e.key==="Enter"&&l()})});let s,a,d=0,m;function l(){if(!document.getElementById("nickname").value){alert("Please enter a nickname to start the game.");return}s=0,m=new Date,document.getElementById("startContainer").style.display="none",document.getElementById("quizContainer").style.display="block",document.getElementById("nickname").addEventListener("keypress",function(t){t.key==="Enter"&&l()}),p()}function p(){s++,fetch(`https://courselab.lnu.se/quiz/question/${s}`).then(e=>e.json()).then(e=>h(e))}function h(e){s=e.id,document.getElementById("questionContainer").innerHTML=`<h2>${e.question}</h2>`,e.alternatives?document.getElementById("optionsContainer").innerHTML=Object.entries(e.alternatives).map(([t,n])=>`
                <input type="radio" name="answer" value="${t}" id="${t}">
                <label for="${t}">${n}</label><br>
            `).join(""):(document.getElementById("optionsContainer").innerHTML=`
            <input type="text" id="textAnswer" placeholder="Your answer">
        `,document.getElementById("textAnswer").addEventListener("keypress",function(n){n.key==="Enter"&&y()})),k()}function y(){let e;const t=document.getElementById("textAnswer");if(t)e=t.value.trim();else{const n=document.querySelector('input[name="answer"]:checked');if(!n){alert("Please select an answer.");return}e=n.value}a.stop(),v(s,e).then(n=>I(n)).catch(n=>{n.message==="Incorrect answer"?(clearInterval(a),u("Wrong answer, game over.")):console.error("Error submitting answer:",n)})}function I(e){e.correct?d++:document.getElementById("optionsContainer").innerHTML+='<p class="wrong-answer">Wrong Answer!</p>',e.nextURL?fetch(e.nextURL).then(t=>t.json()).then(t=>h(t)):(u("Congrats, You win! Good work."),g(e))}function g(e){const t=document.getElementById("timeTaken"),n=document.getElementById("highScoreLink"),i=document.getElementById("resultContainer"),r=Math.floor((new Date-m)/1e3);t.textContent=`Time taken: ${r}s`,e&&E(),n.style.display="block",i.style.display="block",document.getElementById("quizContainer").style.display="none"}function E(){const e=JSON.parse(localStorage.getItem("highScores"))||[],n=Math.floor((new Date-m)/1e3),i=document.getElementById("nickname").value;e.push({nickname:i,score:d,time:n}),localStorage.setItem("highScores",JSON.stringify(e))}function k(){const e=t=>{document.getElementById("time").textContent=t,t<=0&&u("Time is up! Game over.")};a=new f(e,11e3),a.start()}function w(){s=null,d=0,document.getElementById("startContainer").style.display="block",document.getElementById("quizContainer").style.display="none",document.getElementById("resultContainer").style.display="none",document.getElementById("highScoreLink").style.display="none",document.getElementById("nickname").value="",clearInterval(a)}function B(){const e=JSON.parse(localStorage.getItem("highScores"))||[];e.sort((i,o)=>i.time-o.time);const t=document.getElementById("highscore"),n=document.createElement("table");n.innerHTML=`
        <thead>
            <tr>
                <th>Rank</th>
                <th>Nickname</th>
                <th>Time Taken (s)</th>
            </tr>
        </thead>
        <tbody>
            ${e.slice(0,5).map((i,o)=>`
                <tr>
                    <td>${o+1}</td>
                    <td>${i.nickname}</td>
                    <td>${i.time}</td>
                </tr>
            `).join("")}
        </tbody>
    `,t.innerHTML="",t.appendChild(n)}async function v(e,t){const n=await fetch(`https://courselab.lnu.se/quiz/answer/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:t})});if(!n.ok&&n.status===400)throw new Error("Incorrect answer");return await n.json()}function u(e){clearInterval(a),document.getElementById("resultMessage").textContent=e,g()}
